(function(){this.infrastructureFilters={};this.InfrastructureRegisterListController=["$scope","$http","$modal","infrastructureRegisters","organisations","breadcrumb","deleteInfrastructure","assetClasses","notification",function(n,t,i,r,u,f,e,o,s){var h,c;return n.deleteInfrastructure={value:e},n.infrastructureRegisters=r.data.items,n.page=1,n.pages=function(){var n,t,i;for(i=[],c=n=1,t=Math.ceil(r.data.count/10);1<=t?n<=t:n>=t;c=1<=t?++n:--n)i.push(c);return i}(),n.organisations=u.data,n.assetClasses=o.data,n.field="Description",n.desc=!1,n.filters=infrastructureFilters,n.deleteInfrastructureRegister=function(r,u){var f;return f=i.open({templateUrl:"content/views/DeleteConfirmation.html",controller:["$scope","$modalInstance",function(n,t){return n.modal=t}]}),f.result.then(function(i){if(i)return t["delete"]("api/infrastructureRegister/"+r).then(function(){return n.infrastructureRegisters.splice(u,1),s("Successfully Deleted")})})},h=function(i){var r;return n.serverFilter=n.filter,r={},angular.copy(n.filters,r),t.get("api/infrastructureRegister/",{params:angular.extend(r,{filter:n.filter||"",page:i||1,sort:n.field,desc:n.desc})}).then(function(t){return n.page=i||1,n.pages=function(){var n,i,r;for(r=[],c=n=1,i=Math.max(1,Math.ceil(t.data.count/10));1<=i?n<=i:n>=i;c=1<=i?++n:--n)r.push(c);return r}(),n.infrastructureRegisters=t.data.items})},n.sort=function(t){return n.field===t?n.desc=!n.desc:(n.desc=!1,n.field=t),h()},n.search=h,n.clearSearch=function(){return n.filter=null,h()},n.$watch("filters",function(n){if(n)return h()},!0),n.gotoPage=function(t){if(!(t<1)&&!(t>n.pages.length))return n.page=t,h(t)},e?f([{description:"Delete Assets"}]):f([{description:"Asset Register List"}])}]}).call(this)