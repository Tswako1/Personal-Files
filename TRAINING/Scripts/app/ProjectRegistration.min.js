(function(){this.ProjectRegistrationContoller=["$scope","$http","$routeParams","$modal","notification","organisations","projectStatus","infrastructureLifeCycles","implementingAgents","misaSupportAgents","migComponents","sectorProgrammes","developmentalLocations","crossCuttingProgrammes","fundingSources","project","breadcrumb",function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w){var b;return b=function(){return n.project.id?t.put:t.post},n.saveProjectRegistration=function(){if(n.projectRegistrationForm.$valid)return b()("api/project/",n.project).then(function(t){return n.project.id=t.data.id,u("Successfully saved")})},n.organisations=f.data,n.projectStatus=e.data,n.infrastructureLifeCycles=o.data,n.implementingAgents=s.data,n.misaSupportAgents=h.data,n.migComponents=c.data,n.sectorProgrammes=l.data,n.developmentalLocations=a.data,n.crossCuttingProgrammes=v.data,n.fundingSources=y.data,n.autoproject=(p!=null?p.data[0]:void 0)?"PR-"+(p!=null?p.data[0].sectorCode:void 0)+"-"+(p!=null?p.data[0].autoNumber:void 0):void 0,n.$watch("project.organisationId",function(i){if(n.project.organisationId&&(n.project.parentProjectNumber||(n.project.parentProjectNumber="Not Applicable"),n.project.projectStatusId||(n.project.projectStatusId=1),n.wards=t.get("lookup/Wards",{params:{id:i}}),n.project.sectorProgrammeId))return n.infrastructureRegisters=t.get("lookup/InfrastructureRegistersByOrganisationAndSector",{params:{organisationId:n.project.organisationId,sectorProgrammeId:n.project.sectorProgrammeId}}),n.test=n.infrastructureRegisters.data}),n.$watch("project.sectorProgrammeId",function(){if(n.project.organisationId)return n.infrastructureRegisters=t.get("lookup/InfrastructureRegistersByOrganisationAndSector",{params:{organisationId:n.project.organisationId,sectorProgrammeId:n.project.sectorProgrammeId}}),n.test=n.infrastructureRegisters.data}),n.project=(p!=null?p.data[0]:void 0)||{},n.selectLocation=function(){var t;return t={},t.modal=r.open({templateUrl:"content/views/map.html",controller:mapController,resolve:{organisation:["$http",function(t){return t.get("faultReport/municipality/"+n.project.organisationId)}],location:function(){return{lat:n.project.lattitude,long:n.project.longitude}},dialog:function(){return t}}}),t.modal.result.then(function(t){if(t)return n.project.lattitude=t.lat,n.project.longitude=t.long})},w([{description:(p!=null?p.data[0].name:void 0)||"New Project"}])}]}).call(this)